<!DOCTYPE html>
<html>
<title>Toothpasre Social 0.4</title>
<style>
body{
font-family:Arial;
padding:0;
margin:0;
overflow:none;
}
#menu{
height:100px;
width:100px;
}
#bar{
display: flex;
align-items: center;
overflow:hide;
overflow-x:scroll;
overflow-y:hide;
scrollbar-width: none;
color:white;
height:110px;
z-index:3;
background: linear-gradient(to bottom, #4c4c4c 0%,#595959 12%,#666666 25%,#474747 39%,#2c2c2c 50%,#000000 51%,#111111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%);
}
#logtxt{
font-size:10px;
}
.post {
    margin: 15px;
    padding: 15px;
    border-radius: 20px;
    box-shadow: 0px 0px 50px 0px gray;
}
#con{
	display:block;
	position:fixed;
	top:110px;
	height:calc(100% - 110px);
	width:100%;
	overflow-y:scroll;
	width:75%;
}
#lm{
	text-align:center;
	font-size:20px;
	color:gray;
}
h3{
	font-size:10px;
}
.ic{
	height:65px;
	width:65px;
}
#tit{
	font-size:30px;
}
#logtxt{
	font-size:20px;
	position:inline-block;
}
#dbg{
	display:none;
	z-index:5;
	position:fixed;
	width:100%;
	height:100%;
	background:rgba(0,0,0,0.5);
}
#dfg{
	z-index:5;
	position:fixed;
	width:50%;
	height:50%;
	top:25%;
	left:25%;
	background:white;
	border-radius:10px;
}
#abg{
	display:none;
	z-index:5;
	position:fixed;
	width:100%;
	height:100%;
	background:rgba(0,0,0,0.5);
}
#afg{
	z-index:5;
	position:fixed;
	width:50%;
	height:50%;
	top:25%;
	left:25%;
	background:white;
	border-radius:10px;
}
#nbg{
	display:none;
	z-index:5;
	position:fixed;
	width:100%;
	height:100%;
	background:rgba(0,0,0,0.5);
}
#nfg{
	z-index:5;
	position:fixed;
	width:76%;
	height:76%;
	top:12%;
	left:12%;
	background:white;
	border-radius:10px;
	overflow:scroll;
}
#limbomode{
	display:none;
	background:black;
	color:white;
	position:fixed;
	z-index:9999;
	width:100%;
	height:100%;
	text-align:center;
}
.csh{
	font-size:30px;
	height:40px;
	width:40px;
}
#sb{
	position:fixed;
	width:25%;
	left:75%;
	top:140px;
	height:calc(100% - 110px);
	
}
.icb{
	height:100px;
	display:inline;
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js"></script>
<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
<body>
<div id="limbomode">
<h1>You are now a Toothpasre node</h1>
<p>You can leave your computer running with the browser window on the background, and your computer will help more Toothpasre users discover new content faster.</p>
<h6>Warning: Do not switch tabs. If you want to use your browser while Toothpasre is running, make this tab a window.</h6>
<button onclick="limboend();">Return to normal</button>
</div>
<div id="dbg">
<div id="dfg">
<h2>Create post</h2>
<p>Title:<input type="text" id="ip1"/></p>
<p>Community (optional): <input type="text" id="ip2"/></p>
<p>URL link (optional): <input type="text" id="ip3"/></p>
<p>Image upload (optional): <input type="file" onchange="upload(this);"/></p>
<p>Text content (optional):</p>
<textarea id="ip4"></textarea>
<p><button id="psb" onclick="postf();">Post!!!</button><button id="ccb" onclick="cancelf();">Cancel</button></p>
</div>
</div>
<div id="abg">
<div id="afg">
<h2>Account</h2>
<p id="myhash2"></p>
<p><button onclick="acctc();">Close window</button><button onclick="wipeacct();">Logout</button><button onclick="loadacct();">Load</button><button onclick="saveacct();">Save</button><button onclick="nnset();">Change nickname</button></p>
</div>
</div>
<div id="nbg">
<div id="nfg">
<p><button onclick="newsc();">Close window</button></p>
<h2>News</h2>
<h4>Last updated: 23/3/2024</h4>
<p><b>23/3/2024 - Update 0.4 is here!</b></p>
The biggest update for Toothpasre yet has just been released! Here is everything that got added:</br>
Users</br>
Load,Save and Logout user</br>
Instant community jump (page anchor)</br>
News page</br>
Responsive and slim top bar</br>
RSA verification</br>
Nickname</br>
Settings</br>
Text size limit (srry)</br>
Lots of bugfixes</br>
Various improvements</br>
New methods for peer-to-peer discovery</br>
Improved how-to-use page</br>
User hash and nickname indicator</br>
Prepicked popular communities</br>
Changed unblurring rate (*=0.6 instead of -=10)

<p><b>22/3/2024 - 0.3 is out, with small fixes and new features</b></p>
The second update to come out today, 0.3, brings some new features:</br>
Popular Communities sidebar</br>
Anti-spam system</br>
How-to-use page</br>
Many bugfixes</br>
<p><b>22/3/2024 - The biggest update yet: 0.2!</b></p>
Today, Toothpasre 0.2 will be released. New features include:</br>
Smaller top bar</br>
Communities</br>
New post screen</br>
URL links in posts</br>
Images</br>
Anti-psychological traumatisation system</br>
Miner Node</br>
Updated terms</br>
</div>
</div>
<div id="bar">
<img id="menu" src="data:image/jpeg;base64,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"/>
<b id="tit">Toothpasre 0.4</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button class="icb" onclick="acc();"><img class="ic" src="data:image/octet-stream;base64,UklGRmQEAABXRUJQVlA4IFgEAAAQGgCdASpkAGQAPpE8mEelqaKhLxLM6TASCWNtOVk9acuoo591i2r1XIifs1POvDBwDK3OduHAFdOWkknVGZPK3BhywyNIJD6k2UMQiHjIilu5uV69aRrxX24rF0wtkKvg3B1I3V/Nid7Ab9DnzWXa8JXCYjfvMRqdxiOveQsVhNdPcADwJjpA9Gr3KU5Rru7yEmMk9KKsMLHcdncflrxZ/OifaKq077MJPN2prUtKO2nHygHHoJx0TVm28PD5cuOX7oxjV87Fp4PQV/YQ+WRSNNZM5PYDw2EAAP7+h5vXvSfnl5G3bnVedNkbPtFkS0zErmtBKJh/CrIxL5F4p9vreI/vUdBgCOX8bmjcchRy+gjYGoftXaLYXwWg1ZOsdEXEeQYI6sNPjsX57RrOCKi71DL9ppb6DskHPkopo5hh2jbS5QTtLcY7TniUEL4U4ztc/KlYIcexym7LHKqj/1GWGTJTFZCxO5gjW7iufpi/toPRQTzaqQoax/UP+xhfMCcKNT/Edp66TtR4IFuw1hshJkZGJ9BA+eXaz+/m7G3zAgB26UbDukLaO0WwPBbiJgzW8pZ9Tc1yqZnPlm8/injd0SaVIIVd3oso1Cia/DljXtwYg33MdC4fpU1T9/TOj11qLyQpS+FTQlf8N+4A8+aBHgUuiKz1czvdBUUkAI3GC7XPOhPWSGUW/kU+QBkrV6eAXn0RvxfKw0DjKLcetDTd/oG8zw8Fu/hKzJN3O5CCLqq5JOsUi4GQua+c4E+MmleHnioB/IsTv4aNcMlj1+9nS25qlhloWRcAzeD122p0n7DDqtQB/Loq7N2u2FF+uaWO5No6J10YNiQY1Vwx8SbEv/JSK1m7tSOoVXOH3szGBGOlk70EZmhWFHvJ0qsy2ut1+8DTbfSWeR67JinItFT+4HhH8xL0N4FUJnq+mytzIBCigEiNaOJmZ2J1d2Ar9UjfmSXzTjUsspt4OhCKD/MoMFRFAT8HINB8ffL3Pp11D4qHVisIu67ztz+e0hD+vGpxhBtWFc1DfEhxnJWJCMoLOZBKzNRE/YYbdrHo2UzYJkTzl2rfJVPufaFfeMrKo8O80kqdeRCmfCSI52fn2VbupnWulIUaxdUQGhRLXS4LT4GRCVu0PdWl8rlfiBqJjxtEVfZXLRMBegvFq0ecwVDVMPr05FdSJrU0hzPVw2Dx+NfV5rGP32kthZZ7+5RwKQlA6jCCoXvjgFd/EQ1n5LNlRpnLsr6AjL9cXoQfja0npYFZb7GmRWRQ4eg8+f4PsjZYWpqck4I7/gKAfYDVw7TT9694Gq0JNVsGyyUjDk58JWpJEaccoIBpjDjFs2zku3ttUicUd4cdPfN7hIF3aNsxfoNH0hvO+0NMgUSjAwPB5MHsHqmiSLHJdENKtlDVSP9wxjq703CDKCd9DUvDML4Ew41wsiyLk/Q4jxHsPvl1XuUVPQ/nFjPTiIQHZX51bYIG7x+K9ukwAA=="/><h3>ACCOUNT</h3></button>
<button class="icb" onclick="nnset();"><img class="ic" src="data:@file/octet-stream;base64,UklGRuAGAABXRUJQVlA4INQGAACQIgCdASpkAGQAPok4l0elI6KhMvYcAKARCWgAsztyBd/X/lL7SFrf0P4v5Ig99iX15bf7zZ+bhpxih13P+NbIJjJEJH3K58gMqelCY8+dYgd+dO0JC4DHC7Rjydjl9+8jYUhoW8ohkN0VOxSoRmT/0SK7XDt5t35u4buQ3VbSsaIOYGFier9y2bcW0T/KhDsEK+bUv2Nuiha/w/7hteW+9m8MKk68cPDoZ/gpoyKWKQb879zRhyXwcYI1QIeHzY+Tcd177vP4DArjpE6UJER4dJX1KC4r7XJ2BCo0WZ06dTzj+Bj3FLro7CHKlOucKaEovnwtrSKPfYRcIvO69m5dsoC/WT9GK+/lHg/bMstxGLknloacfbTSM1m0KJQA/tk5rVntHjjVAmOIr9Qc6VcTNadusUzz8TrSK5PtNMjlmY2u4o/53WeuqNdA2PrKYp+t7JkjRFoMYSu1//xtWdvcWasWL/tuy8HE1XE1xtxicx13pd7heMl4/bj6ZLmOqsVpl757uQXtb2N5litvIFcU1CY4gDCt/TgxRAPrR2IQtQrxiTmq62DW/mbx0lvXxY30+Gd4xawJODF/YOtsJd8MoBH/p7PdRbsXiJwh6NkbiodS538BBTLuS9UvH6VyDY3xvrlJgTdbsv35FUy1zU/2HbLolqKG9r/zE4TIYfH4kiQ5o6eBH3SKPvas39oNvemrVwMt/6VSZtd1OWK9Iv+1Fkk/j3xx/5lKw7wxtp4PQ9hzzTbCVMwT4RWKxlLnq5VDdxHXK6zZBhYMbQljzvFAADueIrpQD0ntBZpRc55dHaIFp6Dm2i5Gd0YZWg+QtRGvWy9jY81/uydzbHpeKHAKTijivC0+a4MNbNbNigJ583OF+P+MMWJuTaQVYP9o0Cm5NhLY006xWfbWaBvSdp9Q0XrUBhrBZEkez26eHkH2VXdU/IHRilCYoSwValnpYXXSC6DBJsG/MZhT5Pni+vH/69WSz/9XfOKJ/1psemxhqjYr5zd4ZX3RhzH80JQBLVcSJKRNooHjNJdNB4fT9+3hvZCypqjJ2Kez1pnenGYhhYOyBC7Qud1zTh6OyHeiMd+XC/tWC+LO4JgNpSzgV420xZoex5kZuEB9aKtXV2OLg9+QKq+/9fMr7d+hrY4xY0839BpLSNvPcPif8TsS5X+lgCBbslW6/W6OQPxLfr0lkAEr6euO5zERyqOKwyqT1efr+PGdkeeudfun30QM8N/I6TSD3HUuPg+yoBjtrlMMAzI34K6ta1PWtPkyIdBKVUCnLoPzAOYrzRCj48TVk1p96RzBIyo+ucj+hFOz+roEBlB/dvjZPsZUfnTQjyYgEFT07CvJRP1nCA/SqsYuWp/uQ9X14RM1UjUzAQ7jEoQofxrLvl1Q9eOvjfhuAHhi6tcsQ1RDBK43E+gEJYhCiPwI9ljIvW43+58s44sr6fVG/5yXS+TKr7jf2VQneJ1jPNGSFHzbXr8Rr3weERng1K8OaRqCw1RZRGNMg+i2tr/rNefcza/wl7eeImtfXPLWqadLnA/pXXPdIyg9qe4vtiW64Dyxl+SfBrbqMOX3yg0GbKhy4wQ8eqzLC1oh8C/s0eP8DAGD/fMRjyg6mvguhPjkAnosi/DUiQSUN15sI5AFgtg/HfRie4av+Sz1yfGNqJH7h45zENYKzsUPEmZVjfgTWI/Dv6+8jXUMOWVHXpz4RzZ1XoEYIBhSqCl8g3euvazh7zKNbZVsVHseNLYDV9c4Y58kfeMahFxvgKLWnW19QXMiK1ewhcZ+o6g6R3xHYf7dKR9yLX5PeHNF6MHF0oTOGkdEVL/p/Qxwqx/ixVub7t+ur7Bap+UQKq9/6Sg8lsfBEQLchm03OErZJonEJUjJ05dY5XC1rcdmguOXWGPG5cCJwgW0KL7BMN9cGFM6vQRYIEH3MlHLRS44AygF71AiQjxsqJG4LvF1aYWL5ax7JHQ4EG8Yox0U8RiyBqYrHZQZKprfOkO++1FJv41lp1N47Ap8FK1GOW9VkYBOsvYd3L+9APb2f6Ix6IQLIV+7tolCNOYs2IGeWzoF3Ldvo98K8bwboib58LXDKNM1T5yfvwyiNF3vJ9hqxUas3PF0BXR2komllK64XvtnPLraupudj1cF/NBNMiKHOG3hUN5oHKq6+RD9O1++7QjFQBL9MbCwybV1aaYgRqPFQGdpTHWPix7i/R3V+47eYTG7BXunFON4bB184nrKoThiSx5vVVSp8zOMgWJJEguj1l0GQhLuFMXNc2tMVhaaPeTCWhsqxjm7icLWdbsleYb4kXNyUsenAVTlh+3KlMi4adyX7w9maaAAAA=="><h3>NICKNAME</h3></button>
<button class="icb" onclick="post();"><img class="ic" src="data:image/jpeg;base64,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"/><h3>POST</h3></button>
<button class="icb" onclick="filterd();"><img class="ic" src="data:image/octet-stream;base64,UklGRqYBAABXRUJQVlA4IJoBAABQEQCdASpkAGQAP3moxVq1v6iwslJMM/AvCWcAzgAqObVYwmDYtZpZLD4Rrp7A//iMs+q/+8kmUnzUQ/jbuD3d1VnC+zU2bbobr8G0BRZR9uxfso7AxMrzz6i91ghWuA5TJOv3OYMcT+CESvxnUSZBm4xddNsYCTQ99XBDBPD6cRWqJx6pVmlIDRP8l7R3NYtlbAAA/rmkOUFiJ7dcP/DDcDzjyTN/ekhv6bIowDkjocU3MhrAQmbuowrXiEarAcxhdK8F57EoeRCnww4vbt50TKRmhi2L+snSViyIgm/1zRy3xgAXxUwfgmcDL+8tkU3Mqh8A7Q3RqMXC4FnlXHW0JxHmfc7mkR0QaczzuJw0frRrkep1D/rnV8ko89NQXJTySPZUZ2Oihp7VoFgAJnIf+3/zkNgljQA23Bfc5zdILEujgbHy0EZ3nxFWR1wIGWQT5JtFKhI1pKIs0y2G4DCpgnqMTfnHcSw1y0uNTm6pIvIZTgfSc9A2nLjBHBN1yEJ9VZ6dcEUR/h71bdz1NTUuzwG5kQTPRyAAAA=="/><h3>VISIT</h3></button>
<button class="icb" onclick="forget();"><img class="ic" src="data:image/jpeg;base64,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"/><h3>FORGET</h3></button>
<button class="icb" onclick="terms();"><img class="ic" src="data:image/octet-stream;base64,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"><h3>TERMS</h3></button>
<button class="icb" onclick="limbo();"><img class="ic" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAEMuMjoyKkM6NjpLR0NPZKZsZFxcZMySmnmm8dT++u3U6eX//////////+Xp////////////////////////////2wBDAUdLS2RXZMRsbMT//+n/////////////////////////////////////////////////////////////////////wAARCABkAGQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAqEAACAgICAQMDAwUAAAAAAAAAAQIRAyESMUEiUWEEE3EUMpEjQkNigf/EABgBAAMBAQAAAAAAAAAAAAAAAAABAgME/8QAHxEBAQACAgIDAQAAAAAAAAAAAAECERIhA1ETMUFh/9oADAMBAAIRAxEAPwCAABqkHRgzJRUJarpnOAB36fQHCm102a5S65Nk6N1TlHhLa6HX7V+DjbilrbMjmnHSeiNxpcLI7aOPK08kq6CWWcltiFyMq0AAsgAAAbKPF62KdOkTyU/yYY+T22y8fpIAHxw5veortmtsk2y0yEJTdRRdfTxr1Nt/A8XFJKOkbZzZeS36a446S/Tw+f5Mf08fDZWzGyd1aMsLX7XZOjobEmlL8muHk9s8sfSQAB0MgAAAXTTMlG10Jje2/gdy0cbrLHHcvU9FuKS4xVISN2h9t0gyyv0njJ21/ItjvG672Slp0SNtbMbFsBkGxa/n3NKrDJq7SGSDVsOI0k4umLLui5ndaZ5TtgAkn2BXyVCkI6tvsOPmzIy9Ifd4yuujPTqtkho2m7K432znWRyk7HUmnaFZ2mnlkbdXT9ib7GcYufNx9RknbDomAAAGx1JFHkfgktMaaU4pPVewAs22tiVckO3xhwXSIqT5D0nKLWgJ2AtMjPjWvAjaqvJo0YxcfUVOnRZscUsUJpfDNQ2NqKcHtP3KLHBxpeA+yvSVsCjxPwzPty9hcaNxHK6SFxSttFcmKUl0xceGUXbTseuiMHIbhL2D7T86FqntKb0/kxQUZJraYZdTpeBoP+k/grWoV7jbfsAjkBOmIN8DX4CSsNt9ksrGV7RKndGpSiuVaHTdCyPzs1TJJjClsLUU+5/qzHlr+yQgFc6XGNeZ+Mbf/RYzyOXqilE0Gw5DjEvt7uTCbSjS0MpqTaT6CShqdavaFsX+IsB5RXJ8ekAto4matyYsW3Om9AALUlFKKr3Qv+RR8cgAUJuJaf5GegAP1f4LMsAAg2I5NgAHGRgnFvdiqT2m7VWAFo/VYdP8gAEh/9k="/><h3>MINER NODE</h3></button>
<button class="icb" onclick="aspam();"><img class="ic" src="data:image/octet-stream;base64,UklGRqoDAABXRUJQVlA4IJ4DAADQGgCdASpkAGQAPwlyslCrpyUisvT9+XAhCWcA0FnH5ZFVfu8OqlMl1XVkGUbLtZtVY3qCr21mjeiVHMgGa3AcCRoUAvNX++PZ58HPbrOWlmke45hXjyLd/SVNk65AVxyQKWR23ubdP4XYmoicZMkSeJzz75vANiLmZ+16xAlhfzuYxrk75JbKhUlJVDTMDGnv6KH5fseTAiCwe37z+DvtztH+6eikonTwjyJ+Fvv4bx4tJWmlNvf/7we1PbeV7Djx+AJGlupuM8qdwdVzpwwFPXVUuNcAdVx8IJ1xF8kAAHxWagJTRes3xHAq4i6uTSWKsR6q71aUbuT3aYq01UWWRkVdqWp6Vi5KVN257PZMTDAVP2OUTxFJ991vFST4kbgm/PS3Ws4xXop/ss9awDu1sbHlvgckPG0NT4zZ87JON2qN9HhLQUsGmGXVa+S0wuutlMN++LzcTqpbvAJdgiEfV8d/a5rFjHTEv3hPBP98ejC5Zjb78GDrU8vq9+95v4TL5jav85bGNOG8XDXQXg9GzGtDbCLUiMmEOoMnBtSjkjUL2P5Xv09BfM0VpI4mR+KTrHkiC/gQ4fI5eISy7lwDY2htWBCw0aoEYNZ27IysvTfJmi8kD5pufNVJcoJYD3kVTybMfguRxdWESsYtLx/dVb1wc55GIWxOvr0SA1EcKTqHSi2DYaWPqPW2wA4yx82Xd6B0R8lfLFxoAKBbd1Nji8MqDPur3gyfjeeLH9v1Tbv36buRnAujAMYKWz9qCxBhyTIq+EAoypNNpoYWnFVkunAkal9FEw1kVi/k7BudFXD5WMW6AwqCvp5l57xiRI+A4QuVlOLyU5P/84YrVT9GKGbDnGpOZ6jLjpLSh/l4gpy63RrKYlMP0z76YMo41c7zHIyoz1vEOnyTQsC2Zf+uiCxnCKA8NflHXJ3x+HzN4v6cvXRoeqSU+yP6v5GO+krS+ZmExzjQiI0oOTD1yXewPbHTf0rMaBZLP7WhTpcq8blY2Rn4EDoP0R/BzXk2q2Y3J2XVz2kYoU1CkQ9JNzgsxmcF+qDY3dfRJkXSIUyKlV/up1V9BxKBHOVRaoZZswOXvN9Qld8loZNF7F+E5bnT7QvY7Bj3E5wtOxLTLJDlD2qLq+6jb9UTCYbVjk8tOngemuu0YQfC8QHMZffuBfifmqfJ7WCrdFoB2xHdp81MbOBaOgZiTTTfpoSb83Ofz2gs4n/B3Urz9yfAgAAAAA=="/><h3>ANTISPAM</h3></button>
<button class="icb" onclick="help();"><img class="ic" src="data:image/octet-stream;base64,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"/><h3>HOW TO USE</h3></button>
<button class="icb" onclick="news();"><img class="ic" src="data:image/octet-stream;base64,UklGRmABAABXRUJQVlA4IFQBAADQEACdASpkAGQAP/3+/3+/u7+yKxLde/A/iUAaP+Im5ZFfkWZNeUwrGZtf1a6z08N+CIyaBE0chH+tZML4UF24tQgiKYSu5F1qVOr9NgJ2ft4HA7hWJhD5ZnyJoG7F4PzlgETFfoQQy1MUfGkqiX/OMKVRA7cZeAVgonydDmDqxonxB9Xx5qBchrRxrHdIAADuLhTq0mDHiJ6kkdokFsraqF1Ipay765/XDvuGYsIfm6J5knyPun0ehFLyctrIMs5RRkvQXnb/BVAyDAam0huqOo7MTVjxYTutN2eo8QRCtuSQLaSv1BJU7Mds4Ekgef5J9P5p4n5qvtXZPPaNOv+4vWACWv4KzFYy2mwNO42+AN8HAPImO3VUziasFtg76ItHuaLKqtnKid/mThCWJMUKfz57GsQH0+UqQx/xMsZgCOg9rvGFDWTzRSxDAWcw0j4SQAAA"/><h3>NEWS</h3></button>
<span id="logtxt">Loading scripts...</span>
</div>
<div id="sb">
<h2>Popular communities</h2>
<div id="sbc">
</div>
<p>Loading more...</p>
</div>
<div id="con">
<p>Welcome to Toothpasre, the brand new web3 trendy crypto blockchain social media (totally not a scam). Toothpasre connects you directly to others instead to a server (webrtc), resulting in no censorship, but also absence of moderation. Be very careful while browsing, and keep the community safe.</p>
<p id="myhash"></p>
<h2 id="ind">Toothpasre frontpage</h2>
<div id="pv"></div>
<p id="lm">Loading more posts...</br></br></br></br></br></br></p>
</div>
</body>
<script>
/*
POST JSON:
0: title
1: community
2: url
3: content
4: rsa puk hash
5: nickname
6: rsa puk base64
7: rsa sha256 signature
*/
let posts = [];
let logtxt;
let pv;
let me;
let cme = 0;
let cs=0;
let ots = [];
let reps = [];
let comms=[];
let stepping=false;
let fails=0;
let filter='';
let asf=4;
let acct='';
let hash='???';
let nickname='User';
let enc=new JSEncrypt();
let pubs={};
termsSeen=false;
ptv=[];

function buildOTS() {
	let c = 0;
	while (ots.length < 5000) {
		c += 1;
		for(let i=0;i<2;i++){
			if (Math.random() < 0.3 && c > 5) {
				c += 1;
			}
		}
		ots.push(c);
	}
}

function post() {
	if(!termsSeen){
		terms();
	}
	document.getElementById('dbg').style.display='block';
}

function postf(){
	let title=document.getElementById('ip1').value;
	let community=document.getElementById('ip2').value;
	let url=document.getElementById('ip3').value;
	let content=document.getElementById('ip4').value;
	if (title.length < 3) {
		alert('Title length must be 3 or larger');
		return;
	}
	if(title.length>40){
		alert('Title length must be under 40');
	}
	if(community.length>15){
		alert('Community length must be under 15');
	}
	if(content.length>2000){
		alert('Content length must be under 2000');
	}
	let p=[title,community,url,content,hash,nickname,enc.getPublicKeyB64(),'tba'];
	p[7]=enc.sign(posthash(p),CryptoJS.SHA256,'sha256');
	let s=JSON.stringify(p);
	posts.push(s);
	addp(s);
	document.getElementById('dbg').style.display='none';
	document.getElementById('ip1').value='';
	document.getElementById('ip2').value='';
	document.getElementById('ip3').value='';
	document.getElementById('ip4').value='';
}

function cancelf(){
	document.getElementById('dbg').style.display='none';
}

function forget() {
	posts = [];
	document.body.innerHTML = 'h';
}

function log(t) {
	logtxt.innerText = t;
	document.title=t;
}

function bam(e) {
	alert('FATAL ERROR ' + String(e));
	log(String(e));
}

function start() {
	try {
		man();
		buildOTS();
		logtxt = document.getElementById('logtxt');
		pv = document.getElementById('pv');
		log('Searching for empty space...');
		takespace();
		debug();
		if(localStorage.getItem('name')!=null){
			nickname=localStorage.getItem('name');
		}
		if(gh().length!=0){
			sf(gh());
		}
	} catch (e) {
		bam(e);
	}
}

function step(){
	if(fails<10){
		fails+=1;
		let conn=me.connect('tp'+String(ots[cs]));
		log('Scanning at tp'+String(ots[cs]));
		conn.on('open', function() {
			log('Found tp'+String(ots[cs]));
			fails=0;
			reps.push(conn);
			exchange(conn);
			step();
		});
		cs+=1;
	}else{ 
		log('Idle');
	}
}

function pack(){
	return JSON.stringify(posts);
}

function sanitize(s){
	return s.replaceAll('<','').replaceAll('>','').replaceAll('&','').replaceAll('"','``').replaceAll('\'','`').replaceAll('&','+');
}

function addp(s){
	ptv.push(s);
	if(JSON.parse(s)[1]==filter||filter==''){
		render(s);
	}
	let c=sanitize(JSON.parse(s)[1]);
	if(c.length>0){
		ncomm(c);
	}
}

function ncs(){
	let cs=[
		'ask',
		'memes',
		'endofreddit',
		'thefogiscoming',
		'shitposting',
		'mildlyinfuriating',
		'gaming',
		'minecraft',
		'videos',
		'toothpasre',
		'programming',
		'interestingasfuck'
	];
	for(let i=0;i<cs.length;i++){
		ncomm(cs[i]);
	}
}

function ncomm(c){
	if(!comms.includes(c)){
		comms.push(c);
		document.getElementById('sbc').innerHTML+='<p onclick="sf(\''+c+'\');">&nbsp;&nbsp;&nbsp;'+c+'</p>';
	}
}

function nnset(first=false){
	let n=prompt((first?'Welcome to Toothpasre! Set your nickname:':'Set a new nickname:'),first?'':(localStorage.getItem('name')!=null?localStorage.getItem('name'):''));
	if(n!=null){
		if(n.length>0){
			if(n.length<16){
				nickname=n;
				localStorage.setItem('name',n);
				if(!first){
					alert('Success');
				}
			}else{
				alert('Your name needs to be 15 characters or less.');
			}
		}else{
			alert('You need at least one character in your name.');
		}
	}
}

function render(s){
	try{
		let e=JSON.parse(s);
		let h='';
		let dn='';
		
		if(e[1].length>15){return;}
		if(e[0].length>20){return;}
		if(e[3].length>2000){return;}
		if(e[4].length>10){return;}
		if(e[5].length>15){return;}
		
		if(!verify(e)){
			return;
		}
		
		h+='<div class="post"><h2>'+sanitize(e[0])+'</h2>';
		if(sanitize(e[1]).length>0){
			h+='<p>Posted on <tt onclick="sf(\''+sanitize(e[1])+'\');">'+sanitize(e[1])+'</tt>';
		}else{
			h+='<p>Posted';
		}
		h+='&nbsp;by&nbsp;<tt>'+sanitize(e[4])+'</tt>&nbsp;('+sanitize(e[5])+')</p>';
		let l=sanitize(e[2]);
		if(l.length>0&&(l.startsWith('https://')||l.startsWith('http://')||l.startsWith('data:'))){
			dn=l.split(':')[1]
			if(dn.startsWith('//')){
				dn=dn.split('//')[1];
			}
			dn=dn.split('/')[0];
			if(dn!='image'){
				h+='<p>Link: <tt><a href="'+l+'">'+l+'</a></tt></p>';
			}
		}
		if(sanitize(e[3]).length>0){
			h+='<p>'+sanitize(e[3])+'</p>';
		}
		let d2t={'image':'img'};
		function d2ta(d){
			return d2t[d]==undefined?'iframe width="800" height="600"':d2t[d];
		}
		if(dn.length!=0){
			let rid='a_'+Math.round(Math.random()*10000000);
			h+='<p><button id="'+rid+'_b" class="csh" onclick="document.getElementById(\''+rid+'\').style.display=\'block\';document.getElementById(\''+rid+'_p\').style.display=\'block\';document.getElementById(\''+rid+'_b\').style.display=\'none\';">+</button></p>'
			h+='<p><button id="'+rid+'_p" class="csh" style="display:none;" onclick="document.getElementById(\''+rid+'\').style.display=\'none\';document.getElementById(\''+rid+'_b\').style.display=\'block\';document.getElementById(\''+rid+'_p\').style.display=\'none\';">-</button></p>';
			h+='<div style="display:none;" id="'+rid+'">';
			h+='</br></br><button onclick="try{let e=document.getElementById(\''+rid+'_c\');e.style=\'filter:blur(\'+String(Number(e.style.filter.split(\'(\')[1].split(\'px)\')[0])*0.6)+\'px);\';}catch(e){}">Unblur a bit</button>';
			h+='</br></br><button onclick="try{let e=document.getElementById(\''+rid+'_c\');e.style=\'filter:blur(0);\';}catch(e){}">Unblur completely</button>';
			h+='</br></br><'+d2ta(dn)+' id="'+rid+'_c" style="filter:blur(100px);" src="'+l+'"/>';
			h+='</div>';
		}
		h+='</div>';
		pv.innerHTML+=h;
	}catch(e){
		console.error(e);
	}
}

function upload(f){
	if(f.files[0].size<1000000){
		var reader = new FileReader();
		reader.readAsDataURL(f.files[0]);
		reader.onload = function () {
		document.getElementById('ip3').value=reader.result;
		};
		reader.onerror = function (error) {
		alert('Something went wrong');
		};
	}else{
		alert('Maximum filesize is 1MB.');
	}
}

function merge(s){
	let p=JSON.parse(s);
	for(let i=0;i<p.length;i++){
		if(!isSpam(p[i])){
			posts.push(p[i]);
			addp(p[i]);
		}
	}
}

function exchange(c){
	log('Exchanging data rn');
	c.on('data',function(d){
		merge(String(d));
	});
	c.send(pack());
}

function verify(p){
	try{
		let con=posthash(p);
		let k;
		if(pubs[p[4]]==undefined){
			k=new JSEncrypt();
			k.setPublicKey(p[6]);
			pubs[p[4]]=k;
		}else{
			k=pubs[p[4]];
		}
		if(hok(k)!=p[4]){
			return false;
		}
		if(!k.verify(con,p[7],CryptoJS.SHA256)){
			return false;
		}
		return true;
	}catch(e){
		console.error(e);
		return false;
	}
}

function posthash(p){
	return sha256(String(p[0].length)+p[0]+String(p[1].length)+p[1]+String(p[2].length)+p[2]+String(p[3].length)+p[3]+String(p[4].length)+p[4]+String(p[5].length)+p[5]+String(p[6].length)+p[6]);
}

function allready() {
	stepping=true;
	step();
	me.on('connection', function(conn) {
		reps.push(conn);
		exchange(conn);
	});
	setInterval(function() {
		reps.forEach(function(r){
			r.send(pack());
		});
	},5000);
}

function takespace() {
	me = new Peer('tp' + String(ots[cme]));
	me.on('disconnected', function() {
		me.reconnect();
	});
	me.on('open', function(id) {
		log('Success: ' + String(id) + ' YOUR READY! GOOD LUCK AND DONT CLICK RANDOM LINKS');
		allready();
	});
	me.on('error', function(e) {
		if (String(e).endsWith('is taken')) {
			log('Taken: tp' + String(ots[cme]));
			cme += 1;
			takespace();
		}
		if(stepping){
			step();
		}
	});
}

function limbo(){
	document.getElementById('limbomode').style.display='block';
}

function terms(){
	alert('---Toothpasre terms of use--- Do not upload illegal or 18+ stuff. No pedo. No bots. Be civil. No doxxing. No threats. ðŸ˜‡ï¸');
	termsSeen=true;
}

function filterd(){
	let f=prompt('Write a community name: (click cancel to return home)');
	if(f==null){
		sf('');
	}else{
		sf(f);
	}
}

function sf(f){
	if(f.length==0){
		document.getElementById('ind').innerText='Toothpasre frontpage';
	}else{
		document.getElementById('ind').innerText=f;
		document.getElementById('ind').innerHTML+='<button onclick="sf(\'\');">Return to frontpage</button>';
	}
	sh(f);
	filter=f;
	pv.innerHTML='';
	for(let i=0;i<ptv.length;i++){
		if(JSON.parse(ptv[i])[1]==f||f==''){
			render(ptv[i]);
		}
	}
}

function limboend(){
	document.getElementById('limbomode').style.display='none';
}

function debug(){
	
}

function aspam(){
	try{
		let as=Math.round(Number(prompt('Set anti-spam filter power (1 to 10)')));
		if(as<1){
			as=1;
		}
		if(as>10){
			as=10;
		}
		asf=as;
	}catch(e){}
}

function help(){
	alert('How to use: Click "account" to manage account. Click "post" to post. click "forget" incase you saw some shit. click "terms" to read boring text. click "visit" to go to a community. do not click "miner node". click "antispam" to set the anti-spam threshold. click "how to use" to, to uhh to uhh i forgot');
}

function isSpam(s){
	let sd=JSON.parse(s)[1]+' '+JSON.parse(s)[3];
	if(posts.includes(s)){
		return true;
	}
	for(let i=0;i<posts.length;i++){
		let pd=JSON.parse(posts[i])[1]+' '+JSON.parse(posts[i])[3];
		if(fuz(sd,pd)<asf){
			return true;
		}
	}
	return false;
}

function fuz(str1, str2) {
  const len1 = str1.length;
  const len2 = str2.length;

  let matrix = Array(len1 + 1);
  for (let i = 0; i <= len1; i++) {
    matrix[i] = Array(len2 + 1);
  }

  for (let i = 0; i <= len1; i++) {
    matrix[i][0] = i;
  }

  for (let j = 0; j <= len2; j++) {
    matrix[0][j] = j;
  }

  for (let i = 1; i <= len1; i++) {
    for (let j = 1; j <= len2; j++) {
      if (str1[i - 1] === str2[j - 1]) {
        matrix[i][j] = matrix[i - 1][j - 1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j] + 1,
          matrix[i][j - 1] + 1,
          matrix[i - 1][j - 1] + 1
        );
      }
    }
  }

  return matrix[len1][len2];
}

function acc(){
	document.getElementById('abg').style.display='block';
}

function acctc(){
	document.getElementById('abg').style.display='none';
}

function nacc(){
	localStorage.setItem('puk',enc.getPublicKeyB64());
	localStorage.setItem('prk',enc.getPrivateKeyB64());
}

function wipeacct(){
	if(confirm('If you haven\'t saved your account, you will lose it forever! are you sure?')){
		localStorage.removeItem('puk');
		localStorage.removeItem('prk');
		window.location.reload(true);
	}
}

function loadacct(){
	let as=prompt('Write here your account string. WARNING: Your old account will be logged out. If you want to keep it, save it first.');
	if(as!=null&&as.length!=0){
		let u=JSON.parse(atob(as));
		localStorage.setItem('puk',u[0]);
		localStorage.setItem('prk',u[1]);
		localStorage.setItem('name',u[2]);
		window.location.reload(true);
	}
}
function saveacct(){
	alert('A strange text called "account string" will be copied to your clipboard. Do not show it to ANYONE! This is your account! Save it on a text file, or a password manager.');
	copy(btoa(JSON.stringify([enc.getPublicKeyB64(),enc.getPrivateKeyB64(),nickname])));
}

function man(){
	ncs();
	nac=false;
	if(localStorage.getItem('puk')==null){
		nacc();
		nnset(true);
		nac=true;
	}else{
		enc.setPublicKey(localStorage.getItem('puk'));
		enc.setPrivateKey(localStorage.getItem('prk'));
	}
	hash=myhash();
	document.getElementById('myhash').innerText=(nac?'Welcome! Your unique username is ':'Logged in as ')+hash;
	document.getElementById('myhash2').innerText='Logged in as '+hash;
}

function myhash(){
	return sha256(enc.getPublicKeyB64()).substring(0,10);
}

function hok(k){
	return sha256(k.getPublicKeyB64()).substring(0,10);
}

function sha256(ascii) {
    function rightRotate(value, amount) {
        return (value>>>amount) | (value<<(32 - amount));
    };
    
    var mathPow = Math.pow;
    var maxWord = mathPow(2, 32);
    var lengthProperty = 'length'
    var i, j; // Used as a counter across the whole file
    var result = ''

    var words = [];
    var asciiBitLength = ascii[lengthProperty]*8;
    
    //* caching results is optional - remove/add slash from front of this line to toggle
    // Initial hash value: first 32 bits of the fractional parts of the square roots of the first 8 primes
    // (we actually calculate the first 64, but extra values are just ignored)
    var hash = sha256.h = sha256.h || [];
    // Round constants: first 32 bits of the fractional parts of the cube roots of the first 64 primes
    var k = sha256.k = sha256.k || [];
    var primeCounter = k[lengthProperty];
    /*/
    var hash = [], k = [];
    var primeCounter = 0;
    //*/

    var isComposite = {};
    for (var candidate = 2; primeCounter < 64; candidate++) {
        if (!isComposite[candidate]) {
            for (i = 0; i < 313; i += candidate) {
                isComposite[i] = candidate;
            }
            hash[primeCounter] = (mathPow(candidate, .5)*maxWord)|0;
            k[primeCounter++] = (mathPow(candidate, 1/3)*maxWord)|0;
        }
    }
    
    ascii += '\x80' // Append Æ‡' bit (plus zero padding)
    while (ascii[lengthProperty]%64 - 56) ascii += '\x00' // More zero padding
    for (i = 0; i < ascii[lengthProperty]; i++) {
        j = ascii.charCodeAt(i);
        if (j>>8) return; // ASCII check: only accept characters in range 0-255
        words[i>>2] |= j << ((3 - i)%4)*8;
    }
    words[words[lengthProperty]] = ((asciiBitLength/maxWord)|0);
    words[words[lengthProperty]] = (asciiBitLength)
    
    // process each chunk
    for (j = 0; j < words[lengthProperty];) {
        var w = words.slice(j, j += 16); // The message is expanded into 64 words as part of the iteration
        var oldHash = hash;
        // This is now the undefinedworking hash", often labelled as variables a...g
        // (we have to truncate as well, otherwise extra entries at the end accumulate
        hash = hash.slice(0, 8);
        
        for (i = 0; i < 64; i++) {
            var i2 = i + j;
            // Expand the message into 64 words
            // Used below if 
            var w15 = w[i - 15], w2 = w[i - 2];

            // Iterate
            var a = hash[0], e = hash[4];
            var temp1 = hash[7]
                + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25)) // S1
                + ((e&hash[5])^((~e)&hash[6])) // ch
                + k[i]
                // Expand the message schedule if needed
                + (w[i] = (i < 16) ? w[i] : (
                        w[i - 16]
                        + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15>>>3)) // s0
                        + w[i - 7]
                        + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2>>>10)) // s1
                    )|0
                );
            // This is only used once, so *could* be moved below, but it only saves 4 bytes and makes things unreadble
            var temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22)) // S0
                + ((a&hash[1])^(a&hash[2])^(hash[1]&hash[2])); // maj
            
            hash = [(temp1 + temp2)|0].concat(hash); // We don't bother trimming off the extra ones, they're harmless as long as we're truncating when we do the slice()
            hash[4] = (hash[4] + temp1)|0;
        }
        
        for (i = 0; i < 8; i++) {
            hash[i] = (hash[i] + oldHash[i])|0;
        }
    }
    
    for (i = 0; i < 8; i++) {
        for (j = 3; j + 1; j--) {
            var b = (hash[i]>>(j*8))&255;
            result += ((b < 16) ? 0 : '') + b.toString(16);
        }
    }
    return result;
};
function fallbackCopyTextToClipboard(text) {
  var textArea = document.createElement("textarea");
  textArea.value = text;
  
  // Avoid scrolling to bottom
  textArea.style.top = "0";
  textArea.style.left = "0";
  textArea.style.position = "fixed";

  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();

  try {
    var successful = document.execCommand('copy');
  } catch (err) {
  }

  document.body.removeChild(textArea);
}
function copy(text) {
  if (!navigator.clipboard) {
    fallbackCopyTextToClipboard(text);
    return;
  }
  navigator.clipboard.writeText(text).then(function() {
  }, function(err) {
  });
}
function sh(h){
	window.location = (""+window.location).replace(/#[A-Za-z0-9_]*$/,'')+"#"+h;
}
function gh(){
	let h=window.location.hash.split('#',2)[1];
	return h==undefined?'':h;
}

function news(){
	document.getElementById('nbg').style.display='block';
}

function newsc(){
	document.getElementById('nbg').style.display='none';
}

document.addEventListener('DOMContentLoaded', start);
console.error('WARNING!!!!!!!!!!! IF SOMEONE TOLD YOU TO WRITE SOMETHING HERE, ITS A SCAM! DO NOT WRITE ANYTHING HERE THAT A STRANGER TOLD YOU TO WRITE!');

</script>
</html>
